"use strict";(self["webpackChunkaauevora"]=self["webpackChunkaauevora"]||[]).push([[31],{8464:function(e,a,t){t.d(a,{Z:function(){return d}});var o=t(6252),r=t(3577);const s={class:"button"},i=["href"];function n(e,a,t,n,l,c){return(0,o.wg)(),(0,o.iD)("button",s,[(0,o.Uk)((0,r.zw)(t.buttonText)+" ",1),(0,o.WI)(e.$slots,"default",{},void 0,!0),t.link?((0,o.wg)(),(0,o.iD)("a",{key:0,href:t.link,rel:"noreferrer nooppener",target:"_blank"},null,8,i)):(0,o.kq)("",!0)])}var l={name:"Button",props:{buttonText:String,link:String}},c=t(3744);const u=(0,c.Z)(l,[["render",n],["__scopeId","data-v-5bd2d029"]]);var d=u},8097:function(e,a,t){t.r(a),t.d(a,{default:function(){return ie}});var o=t(6252),r=t(9963),s=t(3577),i=t(9322);const n=e=>((0,o.dD)("data-v-7a69fe9d"),e=e(),(0,o.Cn)(),e),l={key:0,class:"login"},c=n((()=>(0,o._)("img",{src:i,alt:""},null,-1))),u=n((()=>(0,o._)("label",{for:"Username"},"Username",-1))),d={key:0},p=n((()=>(0,o._)("label",{for:"password"},"Password",-1))),g={key:1},h={key:1,class:"sidebarAPI"},m=n((()=>(0,o._)("i",{class:"fas fa-pen"},null,-1))),f=n((()=>(0,o._)("span",null,"Criar notícia",-1))),w=[m,f],v=n((()=>(0,o._)("i",{class:"fas fa-edit"},null,-1))),y=n((()=>(0,o._)("span",null,"Editar notícia",-1))),D=[v,y],b=n((()=>(0,o._)("i",{class:"fas fa-trash-alt"},null,-1))),_=n((()=>(0,o._)("span",null,"Apagar notícia",-1))),k=[b,_],C={key:2,class:"postBlog"},F={class:"getNoticia"},P={key:0,class:"forms"},N=n((()=>(0,o._)("label",{for:"titulo"},"Título",-1))),T=n((()=>(0,o._)("label",{for:"category"},"Categoria principal",-1))),O=(0,o.uE)('<option value="Comunicados" data-v-7a69fe9d>Comunicados</option><option value="Desporto" data-v-7a69fe9d>Desporto</option><option value="Discursos" data-v-7a69fe9d>Discursos</option><option value="Ensino" data-v-7a69fe9d>Ensino</option><option value="Geral" data-v-7a69fe9d>Geral</option><option value="Politica" data-v-7a69fe9d>Politica</option>',6),x=[O],A={for:"data"},E=n((()=>(0,o._)("label",{for:"foto"},"Foto:",-1))),z=n((()=>(0,o._)("label",{for:"nomeDoficheiro"},"Nome do ficheiro",-1))),H=n((()=>(0,o._)("label",{for:"assinatura"},"Assinatura",-1))),I={class:"formDeParagrafos"},M={class:"inputs"},U={for:"paragrafo"},j=["onUpdate:modelValue"],S={class:"buttonsParagraphs"},q={class:"sucesspost"},B={key:0,class:"postCreated"},V=n((()=>(0,o._)("h1",null,"Notícia criada com sucesso!",-1))),Y=n((()=>(0,o._)("i",{class:"far fa-check-circle"},null,-1)));function G(e,a,t,i,n,m){const f=(0,o.up)("Button"),v=(0,o.up)("Dropzone");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.loggedIn?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("section",l,[(0,o._)("form",{onSubmit:a[2]||(a[2]=(0,r.iM)((()=>{}),["prevent"]))},[c,u,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>i.username=e),name:"Username",placeholder:"Username",required:""},null,512),[[r.nr,i.username]]),n.wrongUserError?((0,o.wg)(),(0,o.iD)("span",d,"O usuário não existe")):(0,o.kq)("",!0),p,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),name:"password",placeholder:"Password",required:""},null,512),[[r.nr,i.password]]),n.wrongPasswordError?((0,o.wg)(),(0,o.iD)("span",g,"A password está errada")):(0,o.kq)("",!0),(0,o._)("div",{class:(0,s.C_)(["buttons",{isActive:i.isLoginFormFilled}])},[(0,o.Wm)(f,{class:"button",buttonText:"Iniciar sessão",onClick:m.logIn},null,8,["onClick"])],2)],32)])),n.loggedIn&&!n.formSent?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("ul",null,[(0,o._)("li",{onClick:a[3]||(a[3]=(...e)=>m.createNews&&m.createNews(...e))},w),(0,o._)("li",{onClick:a[4]||(a[4]=(...e)=>m.editNews&&m.editNews(...e))},D),(0,o._)("li",{onClick:a[5]||(a[5]=(...e)=>m.deleteNews&&m.deleteNews(...e))},k)])])):(0,o.kq)("",!0),n.loggedIn&&!n.formSent?((0,o.wg)(),(0,o.iD)("section",C,[(0,o._)("h1",null,(0,s.zw)(n.headerText),1),(0,o._)("div",F,["Editar notícia"==n.headerText||"Eliminar notícia"==n.headerText?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,name:"selectnoticia",id:"selectnoticia","onUpdate:modelValue":a[6]||(a[6]=e=>n.selectedNoticia=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.titulos,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id},(0,s.zw)(e.title),1)))),128))],512)),[[r.bM,n.selectedNoticia]]):(0,o.kq)("",!0)]),"Criar nova notícia"==n.headerText?((0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("form",{onSubmit:a[11]||(a[11]=(0,r.iM)((()=>{}),["prevent"]))},[N,(0,o.wy)((0,o._)("input",{type:"text",id:"titulo","onUpdate:modelValue":a[7]||(a[7]=e=>i.titulo=e),placeholder:"Episódio V: O Império Contra-Ataca",required:""},null,512),[[r.nr,i.titulo]]),T,(0,o.wy)((0,o._)("select",{name:"category",id:"category","onUpdate:modelValue":a[8]||(a[8]=e=>i.category=e),required:""},x,512),[[r.bM,i.category]]),(0,o._)("label",A,"Data: "+(0,s.zw)(i.diaDeHoje)+" de "+(0,s.zw)(n.mesDeHoje)+", "+(0,s.zw)(i.anoDeHoje),1),E,(0,o.Wm)(v,{onDrop:(0,r.iM)(i.drop,["prevent"]),onChange:i.selectedFile},null,8,["onDrop","onChange"]),(0,o._)("span",null,"Ficheiro: "+(0,s.zw)(i.dropzoneFile.name),1),z,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=e=>n.nomeDoFicheiro=e),placeholder:"40anos.jpg"},null,512),[[r.nr,n.nomeDoFicheiro]]),H,(0,o.wy)((0,o._)("input",{type:"text",id:"assinatura","onUpdate:modelValue":a[10]||(a[10]=e=>n.assinatura=e),placeholder:"Mestre Yoda"},null,512),[[r.nr,n.assinatura]]),(0,o._)("div",{class:(0,s.C_)(["buttons",{isActive:i.isFormFilled}])},[(0,o.Wm)(f,{buttonText:"Publicar",onClick:m.publishNews},null,8,["onClick"])],2)],32),(0,o._)("form",I,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.numberOfParagraphs,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"paragraph",key:e},[(0,o._)("div",M,[(0,o._)("label",U,(0,s.zw)(e)+"º Parágrafo",1),(0,o.wy)((0,o._)("textarea",{type:"text",id:"paragrafo","onUpdate:modelValue":a=>n.paragrafo[e-1]=a,placeholder:"Há muito tempo, em uma galáxia muito, muito distante...",required:""},null,8,j),[[r.nr,n.paragrafo[e-1]]])])])))),128)),(0,o._)("div",S,[(0,o._)("i",{class:"fas fa-plus",onClick:a[12]||(a[12]=(...e)=>m.incrementNumberOfParagraphs&&m.incrementNumberOfParagraphs(...e))}),(0,o._)("i",{class:"fas fa-times",onClick:a[13]||(a[13]=(...e)=>m.decrementNumberOfParagraphs&&m.decrementNumberOfParagraphs(...e))})])])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("section",q,[n.formSent?((0,o.wg)(),(0,o.iD)("div",B,[V,Y,(0,o.Wm)(f,{class:"button",buttonText:"Voltar",onClick:a[14]||(a[14]=e=>n.formSent=!1)})])):(0,o.kq)("",!0)])],64)}var J=t(8464);const L=e=>((0,o.dD)("data-v-22ed2fa1"),e=e(),(0,o.Cn)(),e),W=L((()=>(0,o._)("span",null,"Arraste um ficheiro",-1))),Z=L((()=>(0,o._)("span",null,"OU",-1))),$=L((()=>(0,o._)("label",{for:"dropzoneFile"},"Selecionar ficheiro",-1))),K=L((()=>(0,o._)("input",{type:"file",id:"dropzoneFile",class:"dropzoneFile"},null,-1))),Q=[W,Z,$,K];function R(e,a,t,i,n,l){return(0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["dropzone",{activeDropzone:i.active}]),onDragenter:a[0]||(a[0]=(0,r.iM)(((...e)=>i.toggleActive&&i.toggleActive(...e)),["prevent"])),onDragleave:a[1]||(a[1]=(...e)=>i.toggleActive&&i.toggleActive(...e)),onDragover:a[2]||(a[2]=(0,r.iM)((()=>{}),["prevent"])),onDrop:a[3]||(a[3]=(...e)=>i.toggleActive&&i.toggleActive(...e))},Q,34)}var X=t(2262),ee={name:"Dropzone",setup(){const e=(0,X.iH)(!1),a=()=>{e.value=!e.value};return{active:e,toggleActive:a}}},ae=t(3744);const te=(0,ae.Z)(ee,[["render",R],["__scopeId","data-v-22ed2fa1"]]);var oe=te,re={name:"Api",data(){return{loggedIn:!1,isLoginFormFilled:!1,username:"",password:"",wrongUserError:"",wrongPasswordError:"",headerText:"Criar nova notícia",selectedNoticia:"",currentNoticia:{title:"",id:""},titulos:[],titulo:"",category:"",paragrafo:[],isFormFilled:!1,nomeDoFicheiro:"",assinatura:"",mesDeHoje:"",numberOfParagraphs:1,authToken:"",errorMessage:"",formSent:!1,noticiaId:""}},setup(){let e=(0,X.iH)("");const a=a=>{e.value=a.dataTransfer.files[0]},t=()=>{e.value=document.querySelector(".dropzoneFile").files[0]},r=(new Date).getDate(),s=(new Date).getFullYear(),i=()=>{let e=(new Date).getMonth()+1;switch(e){case 1:return"Janeiro";case 2:return"Fevereiro";case 3:return"Março";case 4:return"Abril";case 5:return"Maio";case 6:return"Junho";case 7:return"Julho";case 8:return"Agosto";case 9:return"Setembro";case 10:return"Outubro";case 11:return"Novembro";case 12:return"Dezembro";default:break}};let n=(0,X.iH)(""),l=(0,X.iH)(""),c=(0,X.iH)([]),u=(0,X.iH)(!1);(0,o.YP)([n,l,c],(()=>{n.value&&l.value&&c.value?u.value=!0:u.value=!1}));let d=(0,X.iH)(""),p=(0,X.iH)(""),g=(0,X.iH)(!1);return(0,o.YP)([d,p],(()=>{d.value&&p.value?g.value=!0:g.value=!1})),{dropzoneFile:e,drop:a,selectedFile:t,diaDeHoje:r,getMes:i,anoDeHoje:s,isFormFilled:u,titulo:n,category:l,isLoginFormFilled:g,username:d,password:p}},watch:{async selectedNoticia(e,a){let t;for(let o in this.titulos)this.titulos[o].title==e&&(t=this.titulos[o].id);await this.getNoticiaInfo(t)}},components:{Button:J.Z,Dropzone:oe},created(){this.mesDeHoje=this.getMes()},methods:{async logIn(){if(!this.isLoginFormFilled)return;this.wrongUserError=!1,this.wrongPasswordError=!1;const e={username:this.username,password:this.password},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("https://aaue-blogs.onrender.com/api/user/login",a).then((async e=>{const a=await e.json();if(!e.ok){const t=a&&a.message||e.status;return Promise.reject(t)}this.authToken=a.token,this.loggedIn=!0})).catch((e=>{this.errorMessage=e,this.errorMessage.includes("password")&&(this.wrongPasswordError=!0),this.errorMessage.includes("User")&&(this.wrongUserError=!0),console.error("There was an error!",e)}))},getCategoryColor(e){switch(e){case"Comunicados":return"#BAC0CB";case"Desporto":return"#BA292C";case"Discursos":return"#549EFF";case"Ensino":return"#00BD9D";case"Geral":return"#F8D01C";case"Politica":return"#FF7733";default:return"000000"}},async publishNews(){if(!this.isFormFilled)return;const e=new Date,a={title:this.titulo,category:this.category,categoryColor:this.getCategoryColor(this.category),date:`${e.getDate()} de ${this.getMes(e.getMonth+1)}, ${e.getFullYear}`,paragraphs:this.paragrafo,imageLink:this.nomeDoFicheiro,signature:this.assinatura,token:this.authToken};if(this.authToken){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};await fetch("https://aaue-blogs.onrender.com/api/admin/createBlogpost",e).then((e=>{e.ok&&(this.formSent=!0,this.clearInfo())})).catch((e=>{this.errorMessage=e.message,console.log(e)}))}},incrementNumberOfParagraphs(){this.numberOfParagraphs++},decrementNumberOfParagraphs(){this.numberOfParagraphs<=1?this.numberOfParagraphs=1:(this.numberOfParagraphs--,this.paragrafo.pop())},createNews(){this.headerText="Criar nova notícia",this.currentNoticia="",this.clearInfo()},async editNews(){this.headerText="Editar notícia",this.currentNoticia="",await this.getTitulosDasNoticias()},async deleteNews(){this.headerText="Eliminar notícia",this.currentNoticia="",await this.getTitulosDasNoticias()},async getTitulosDasNoticias(){const e={method:"GET",headers:{"Content-Type":"application/json"}};await fetch("https://aaue-blogs.onrender.com/api/getAllBlogpostTitles",e).then((async e=>{if(this.titulos=await e.json(),!e.ok){const a=data&&data.message||e.status;return Promise.reject(a)}}))},async getNoticiaInfo(e){const a={method:"GET",headers:{"Content-Type":"application/json"}},t=`https://aaue-blogs.onrender.com/api/getBlogpost/${e}`;await fetch(t,a).then((async e=>{let a=await e.json();if(!e.ok){const t=a&&a.message||e.status;return Promise.reject(t)}this.titulo=a.title,this.category=a.category,this.category=a.categoryColor,this.dataDePublicacao=a.date,this.paragrafo=a.paragraphs,this.numberOfParagraphs=a.paragraphs.length,this.assinatura=a.signature}))},clearInfo(){this.titulo="",this.category="",this.category="",this.dataDePublicacao="",this.paragrafo=[],this.assinatura="",this.numberOfParagraphs=1}}};const se=(0,ae.Z)(re,[["render",G],["__scopeId","data-v-7a69fe9d"]]);var ie=se}}]);
//# sourceMappingURL=Api.b3cb9294.js.map